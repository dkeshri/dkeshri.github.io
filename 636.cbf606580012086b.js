"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[636],{3636:(L,m,r)=>{r.r(m),r.d(m,{ProductsModule:()=>Y});var v=r(6895),t=r(8274),h=r(805),f=r(4325),T=r(4004),g=r(6931);let C=(()=>{class o{constructor(e){this.apiService=e}getUnitConversions(){return this.apiService.get("unitConversions")}createUnitConversion(e){return this.apiService.post("unitConversions",e)}getUnitConversionOptions(){return this.getUnitConversions().pipe((0,T.U)(e=>{let n;return n=e.map(i=>{let c={};return c.value=i.id.toString(),c.label=i.label,c}),n}))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.s))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var a=r(4006),b=r(4859),u=r(1740),U=r(4463);let x=(()=>{class o{constructor(e,n,i){this.messageService=e,this.dialogConfig=n,this.unitConversionService=i,this.primariUnitLabel="",this.secUnitLabel=""}ngOnInit(){let e=this.dialogConfig.data;this.primariUnitLabel=e.primaryUnitText,this.secUnitLabel=e.secUnitText,console.log(e)}onSave(){let e=this.dialogConfig.data;this.unitConversionService.createUnitConversion({primaryId:e.primaryId,secId:e.secId,value:this.conversionRate,label:e.primaryUnitText+" To "+e.secUnitText}).subscribe(()=>{this.messageService.add({severity:"success",summary:"unit conversion added",detail:`1 ${e.primaryUnitText} = ${this.conversionRate} ${e.secUnitText}`,life:3e3})})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(h.ez),t.Y36(f.S),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-create-unit-conversion"]],decls:15,vars:6,consts:[[1,"unitConversionDetails"],[1,"row"],[1,"col"],["id","rate","type","number","pInputText","",1,"p-inputtext-sm",3,"ngModel","ngModelChange"],[1,"action-container",2,"margin-top","25px"],["mat-raised-button","","color","primary",1,"btn",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"span"),t._uU(4),t.qZA(),t.TgZ(5,"span"),t._uU(6,"="),t.qZA()(),t.TgZ(7,"div",2)(8,"input",3),t.NdJ("ngModelChange",function(c){return n.conversionRate=c}),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.qZA()()(),t.TgZ(11,"div",4)(12,"button",5),t.NdJ("click",function(){return n.onSave()}),t._uU(13),t.ALo(14,"translate"),t.qZA()()()),2&e&&(t.xp6(4),t.hij("1 ",n.primariUnitLabel,""),t.xp6(4),t.Q6J("ngModel",n.conversionRate),t.xp6(2),t.Oqu(n.secUnitLabel),t.xp6(3),t.Oqu(t.lcZ(14,4,"Common.Save")))},dependencies:[a.Fj,a.wV,a.JJ,a.On,b.lW,u.o,U.X$],styles:[".unitConversionDetails[_ngcontent-%COMP%]{margin-top:10px}.col[_ngcontent-%COMP%]{display:flex;justify-content:space-evenly;align-items:center}.col[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:.7}"]}),o})();var y=r(5223),A=r(4799),O=r(801),d=r(4843);let Z=(()=>{class o{constructor(e){this.apiService=e}getProducts(){return this.apiService.get("Products")}getProduct(e){return this.apiService.get("Products/"+e)}createProduct(e){return this.apiService.post("Products",e)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(g.s))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var S=r(2218),F=r(7392),I=r(4247),G=r(5702),_=r(585),w=r(1989);function D(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onSave())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.productFormGroup.invalid),t.xp6(1),t.Oqu(t.lcZ(2,2,"Common.Save"))}}function J(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",32),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onUpdate())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.productFormGroup.invalid),t.xp6(1),t.Oqu(t.lcZ(2,2,"Common.Update"))}}function M(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",33),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onDelete())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("disabled",e.productFormGroup.invalid),t.xp6(1),t.Oqu(t.lcZ(2,2,"Common.Delete"))}}let N=(()=>{class o{constructor(e,n,i,c,p,P,l){this.route=e,this.formBuilder=n,this.productService=i,this.messageService=c,this.unitService=p,this.dialogService=P,this.unitConversionService=l,this.unitOptions=[],this.secUnitOptions=[],this.unitConversionOptions=[],this.showUpdateBtn=!1,this.showDeleteBtn=!1,this.faPlusCircle=O.KtF,this.faPlusCircleStyle={color:"rgb(63 81 181)"}}ngOnInit(){let e=new Date;this.route.params.subscribe(n=>{this.productId=n.productId,this.productFormGroup=this.formBuilder.group({barcode:[""],name:[""],costPrice:[""],price:[""],expireOn:[e],unit:[""],secUnit:[""],isActive:[!0],unitConversion:[""]}),this.unitService.getUnitOptions().subscribe(i=>{this.unitOptions=i,this.secUnitOptions=i,this.unitOptions.length>0&&this.productFormGroup.controls.unit.setValue(this.unitOptions[0].value),this.secUnitOptions.length>0&&this.productFormGroup.controls.secUnit.setValue(this.secUnitOptions[0].value)}),this.unitConversionService.getUnitConversionOptions().subscribe(i=>{this.unitConversionOptions=i,this.unitConversionOptions.length>0&&this.productFormGroup.controls.unitConversion.setValue(this.unitConversionOptions[0].value)}),this.productId!=A.cQ.ADD?(this.showUpdateBtn=!0,this.showDeleteBtn=!0,this.getProductDetail(this.productId)):(this.showUpdateBtn=!1,this.showDeleteBtn=!1)})}getProductDetail(e){this.productService.getProduct(e).subscribe(n=>{this.setFormOnGetProduct(n)})}setFormOnGetProduct(e){let n=new Date(e.expireOn);this.productFormGroup.controls.barcode.setValue(e.barcode),this.productFormGroup.controls.name.setValue(e.name),this.productFormGroup.controls.costPrice.setValue(e.costPrice),this.productFormGroup.controls.price.setValue(e.price),this.productFormGroup.controls.expireOn.setValue(n),this.productFormGroup.controls.unit.setValue(this.unitOptions.find(i=>i.value==e.unitId)?.value),this.productFormGroup.controls.secUnit.setValue(this.secUnitOptions.find(i=>i.value==e.secUnitId)?.value),this.productFormGroup.controls.unitConversion.setValue(this.unitConversionOptions.find(i=>i.value==e.unitConversionId)?.value),this.productFormGroup.controls.isActive.setValue(e.isActive)}onSave(){let e={};e.barcode=this.productFormGroup.controls.barcode.value,e.name=this.productFormGroup.controls.name.value,e.costPrice=this.productFormGroup.controls.costPrice.value,e.price=this.productFormGroup.controls.price.value,e.expireOn=this.productFormGroup.controls.expireOn.value,e.unitId=this.productFormGroup.controls.unit.value,e.secUnitId=this.productFormGroup.controls.secUnit.value,e.isActive=this.productFormGroup.controls.isActive.value,e.unitConversionId=this.productFormGroup.controls.unitConversion.value,this.productService.createProduct(e).subscribe(n=>{this.messageService.add({severity:"success",summary:"Product Created Successfully",detail:n.name,life:3e3})})}onShowUnitDialog(){this.dialogService.open(y.u,{header:"Add Unit",width:"70%"})}onUpdate(){}onDelete(){}onConversionRateAdd(){let e=this.productFormGroup.controls.unit.value,n=this.productFormGroup.controls.secUnit.value,i="",c="";this.unitOptions.forEach(l=>{l.value==e&&(i=l.label)}),this.secUnitOptions.forEach(l=>{l.value==n&&(c=l.label)}),this.dialogService.open(x,{header:"Add Unit Conversion",width:"65%",data:{primaryId:e,primaryUnitText:i,secId:n,secUnitText:c}})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(d.gz),t.Y36(a.qu),t.Y36(Z),t.Y36(h.ez),t.Y36(S._),t.Y36(f.xA),t.Y36(C))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-product-details"]],decls:67,vars:10,consts:[[1,"container"],[3,"formGroup"],[1,"productDetails"],[1,"row"],[1,"p-field"],["for","barcode"],["formControlName","barcode","id","barcode","type","text","pInputText","",1,"p-inputtext-sm"],[2,"color","red"],["for","productName"],["formControlName","name","id","productName","type","text","pInputText","",1,"p-inputtext-sm"],["for","costPrice"],["formControlName","costPrice","id","costPrice","type","text","pInputText","",1,"p-inputtext-sm"],["for","sellPrice"],["formControlName","price","id","sellPrice","type","text","pInputText","",1,"p-inputtext-sm"],[1,"calender-field"],["for","expireOn"],["formControlName","expireOn","id","expireOn","appendTo","body","dateFormat","dd/mm/yy",1,"p-inputtext-sm",3,"showIcon"],["for","unit"],["formControlName","unit","appendTo","body",3,"options"],["for","secUnit"],["formControlName","secUnit","appendTo","body",1,"p-dropdown-sm",3,"options"],["for","unitConversion"],[1,"conversionRate"],["formControlName","unitConversion","appendTo","body",1,"p-dropdown-sm","conversionRateddl",3,"options"],["mat-mini-fab","","color","primary",3,"click"],["for","binary"],["inputId","binary","formControlName","isActive",3,"binary"],[1,"productUnit"],["id","createUnit","mat-raised-button","","color","primary",1,"btn",3,"click"],[1,"action-container"],["class","btn","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","btn","mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn",3,"disabled","click"],["mat-raised-button","","color","warn",1,"btn",3,"disabled","click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0)(1,"h1"),t._uU(2,"Add Product"),t.qZA(),t.TgZ(3,"p-card")(4,"form",1)(5,"div",2)(6,"h2"),t._uU(7,"Product Details"),t.qZA(),t.TgZ(8,"div",3)(9,"div",4)(10,"label",5),t._uU(11,"Product Barcode"),t.qZA(),t._UZ(12,"input",6),t.TgZ(13,"small",7),t._uU(14,"Barcode can not be blank"),t.qZA()(),t.TgZ(15,"div",4)(16,"label",8),t._uU(17,"Product Name"),t.qZA(),t._UZ(18,"input",9),t.qZA(),t.TgZ(19,"div",4)(20,"label",10),t._uU(21,"Cost Price"),t.qZA(),t._UZ(22,"input",11),t.qZA(),t.TgZ(23,"div",4)(24,"label",12),t._uU(25,"Sell Price"),t.qZA(),t._UZ(26,"input",13),t.qZA(),t.TgZ(27,"div",14)(28,"label",15),t._uU(29,"Product Expire On"),t.qZA(),t._UZ(30,"p-calendar",16),t.qZA(),t.TgZ(31,"div",4)(32,"label",17),t._uU(33,"Unit"),t.qZA(),t._UZ(34,"p-dropdown",18),t.qZA(),t.TgZ(35,"div",4)(36,"label",19),t._uU(37,"Secondary Unit"),t.qZA(),t._UZ(38,"p-dropdown",20),t.qZA(),t.TgZ(39,"div",4)(40,"label",21),t._uU(41,"Conversion Rate"),t.qZA(),t.TgZ(42,"div",22),t._UZ(43,"p-dropdown",23),t.TgZ(44,"button",24),t.NdJ("click",function(){return n.onConversionRateAdd()}),t.TgZ(45,"mat-icon"),t._uU(46,"add"),t.qZA()()()(),t.TgZ(47,"div",4)(48,"label",25),t._uU(49),t.qZA(),t._UZ(50,"p-checkbox",26),t.qZA()()(),t.TgZ(51,"div",27)(52,"h2"),t._uU(53,"Create Unit"),t.qZA(),t.TgZ(54,"div",3)(55,"div",4)(56,"label"),t._uU(57,"Action(Add/Delete)"),t.qZA(),t.TgZ(58,"button",28),t.NdJ("click",function(){return n.onShowUnitDialog()}),t._uU(59,"Create Unit"),t.qZA(),t.TgZ(60,"small"),t._uU(61,"Note: If Unit is not Please add !"),t.qZA()(),t._UZ(62,"div"),t.qZA()(),t.TgZ(63,"div",29),t.YNc(64,D,3,4,"button",30),t.YNc(65,J,3,4,"button",30),t.YNc(66,M,3,4,"button",31),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("formGroup",n.productFormGroup),t.xp6(26),t.Q6J("showIcon",!0),t.xp6(4),t.Q6J("options",n.unitOptions),t.xp6(4),t.Q6J("options",n.secUnitOptions),t.xp6(5),t.Q6J("options",n.unitConversionOptions),t.xp6(6),t.Oqu(1==n.productFormGroup.controls.isActive.value?"Active":"Inactive"),t.xp6(1),t.Q6J("binary",!0),t.xp6(14),t.Q6J("ngIf",!n.showUpdateBtn),t.xp6(1),t.Q6J("ngIf",n.showUpdateBtn),t.xp6(1),t.Q6J("ngIf",n.showDeleteBtn))},dependencies:[v.O5,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u,b.lW,F.Hw,u.o,I.Z,G.Lt,_.f,w.XZ,U.X$],styles:[".productDetails[_ngcontent-%COMP%], .productUnit[_ngcontent-%COMP%]{padding:10px 0}.calender-field[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{display:block}.conversionRate[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.conversionRate[_ngcontent-%COMP%]   .conversionRateddl[_ngcontent-%COMP%]{flex:.9}"]}),o})();var R=r(9951),q=r(2613);const E=[{path:"",children:[{path:"",component:(()=>{class o{constructor(e){this.productService=e,this.barcode="",this.isEditable=!1,this.products=[],this.cols=[]}ngOnInit(){this.cols=[{field:"id",header:"Product Code",sortable:!0,filtrable:!0,type:R.Q.Link},{field:"barcode",header:"Barcode",sortable:!0,filtrable:!0},{field:"name",header:"Name",sortable:!1,filtrable:!0},{field:"unitId",header:"Unit",sortable:!1,filtrable:!0},{field:"costPrice",header:"Cost Price",sortable:!1,filtrable:!0},{field:"expireOn",header:"Expire",sortable:!1,filtrable:!0}],this.productService.getProducts().subscribe(e=>{this.products=e})}onEnterPress(e){console.log(this.barcode)}onRowEditInit(e){console.log(e)}onRowEditSave(e){console.log(e)}onRowEditCancel(e){console.log(e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-products"]],decls:6,vars:4,consts:[[1,"content"],[2,"width","220px"],["id","barcodeInput","autofocus","","type","text","pInputText","","placeholder","Product Bar Code",1,"p-inputtext-sm",3,"ngModel","keydown.enter","ngModelChange"],[3,"columns","value","isEditable","RowEditSave"]],template:function(e,n){1&e&&(t.TgZ(0,"h1"),t._uU(1,"Products"),t.qZA(),t.TgZ(2,"div",0)(3,"div",1)(4,"input",2),t.NdJ("keydown.enter",function(c){return n.onEnterPress(c)})("ngModelChange",function(c){return n.barcode=c}),t.qZA()(),t.TgZ(5,"app-data-table",3),t.NdJ("RowEditSave",function(c){return n.onRowEditSave(c)}),t.qZA()()),2&e&&(t.xp6(4),t.Q6J("ngModel",n.barcode),t.xp6(1),t.Q6J("columns",n.cols)("value",n.products)("isEditable",n.isEditable))},dependencies:[q.Q,a.Fj,a.JJ,a.On,u.o]}),o})()},{path:":productId",component:N}]}];let B=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[d.Bz.forChild(E),d.Bz]}),o})();var Q=r(7664);let Y=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.ez,B,Q.m]}),o})()}}]);