"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[96],{5096:(k,c,r)=>{r.r(c),r.d(c,{ShopsModule:()=>N});var d=r(4843),h=r(9951),e=r(8274),m=r(635),Z=r(2613);let f=(()=>{class o{constructor(t){this.shopService=t,this.isEditable=!1}ngOnInit(){this.cols=[{field:"id",header:"Shop Id",sortable:!0,filtrable:!0,type:h.Q.Link},{field:"name",header:"Shop Name",sortable:!0,filtrable:!0},{field:"phone",header:"Phone No.",sortable:!0,filtrable:!0},{field:"isActive",header:"isActive",sortable:!1,filtrable:!1},{field:"userId",header:"User Id",sortable:!1,filtrable:!0,type:h.Q.SubLink,route:"../users/"}],this.shopService.getShops().subscribe(t=>{this.shops=t})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(m.d))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-shops"]],decls:4,vars:3,consts:[[1,"content"],[3,"columns","value","isEditable"]],template:function(t,s){1&t&&(e.TgZ(0,"h1"),e._uU(1,"Shops"),e.qZA(),e.TgZ(2,"div",0),e._UZ(3,"app-data-table",1),e.qZA()),2&t&&(e.xp6(3),e.Q6J("columns",s.cols)("value",s.shops)("isEditable",s.isEditable))},dependencies:[Z.Q]}),o})();var l=r(4799),i=r(4006),b=r(3071),A=r(805),v=r(6895),g=r(4859),S=r(1740),U=r(4247),y=r(5702),T=r(1989),F=r(4463);function x(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onSave())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.shopFormGroup.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Save"))}}function C(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onUpdate())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.shopFormGroup.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Update"))}}function G(o,n){if(1&o){const t=e.EpF();e.TgZ(0,"button",37),e.NdJ("click",function(){e.CHM(t);const a=e.oxw();return e.KtG(a.onDelete())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("disabled",t.shopFormGroup.invalid),e.xp6(1),e.Oqu(e.lcZ(2,2,"Common.Delete"))}}const q=[{path:"",children:[{path:"",component:f},{path:":shopId",component:(()=>{class o{constructor(t,s,a,p,u,_,J){this.route=t,this.formBuilder=s,this.shopService=a,this.userService=p,this.messageService=u,this.confirmationService=_,this.location=J,this.usersOptions=[],this.showUpdateBtn=!1,this.showDeleteBtn=!1}ngOnInit(){this.route.params.subscribe(t=>{this.shopId=t.shopId,this.shopFormGroup=this.formBuilder.group({shopName:[null],phone:[null],userId:[null],isActive:[!0],currentAddresses:this.addressForm(),permanentAddresses:this.addressForm()}),this.userService.getUsersOptions().subscribe(s=>{this.usersOptions=s}),this.shopId!=l.cQ.ADD?(this.showUpdateBtn=!0,this.showDeleteBtn=!0,this.getShopDetail(this.shopId)):(this.showUpdateBtn=!1,this.showDeleteBtn=!1)})}getShopDetail(t){this.shopService.getShop(t).subscribe(s=>{this.setFormOnGetShop(s)})}setFormOnGetShop(t){this.shopFormGroup.controls.shopName.setValue(t.name),this.shopFormGroup.controls.phone.setValue(t.phone),this.shopFormGroup.controls.userId.setValue(this.usersOptions.find(s=>s.value==t.userId.toString())?.value),this.shopFormGroup.controls.isActive.setValue(t.isActive),this.setAddressForm(t.addresses)}addressForm(){return this.formBuilder.group({address1:[null],address2:[null],landmark:[null],city:[null],pincode:[null],state:[null],country:[null]})}setAddressForm(t){t.forEach(s=>{this.shopFormGroup.patchValue(s.isPermanent?{permanentAddresses:s}:{currentAddresses:s})})}onPermanentAddChkChange(t){t.checked?this.shopFormGroup.patchValue({permanentAddresses:{address1:this.shopFormGroup.controls.currentAddresses.value.address1,address2:this.shopFormGroup.controls.currentAddresses.value.address2,landmark:this.shopFormGroup.controls.currentAddresses.value.landmark,city:this.shopFormGroup.controls.currentAddresses.value.city,pincode:this.shopFormGroup.controls.currentAddresses.value.pincode,state:this.shopFormGroup.controls.currentAddresses.value.state,country:this.shopFormGroup.controls.currentAddresses.value.country}}):this.shopFormGroup.controls.permanentAddresses.reset()}onSave(){let t=this.formData();this.shopService.createShop(t).subscribe(s=>{this.messageService.add({severity:"success",summary:"Shop Created Successfully",detail:s.name,life:3e3})})}onUpdate(){let t=this.formData(l.aU.UPDATE);this.shopService.updateShop(t).subscribe(s=>{this.messageService.add({severity:"success",summary:"Shop Updated Successfully",detail:s.name,life:3e3})})}onDelete(){this.confirmationService.confirm({message:"Are you sure you want to delete the shop?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.shopService.deleteShop(this.shopId).subscribe(t=>{this.messageService.add({severity:"success",summary:"Successful",detail:`${t.name} Deleted`,life:3e3}),this.location.back()})}})}formData(t){let s={};t==l.aU.UPDATE&&(s.id=+this.shopId),s.name=this.shopFormGroup.controls.shopName.value,s.phone=this.shopFormGroup.controls.phone.value,s.userId=this.shopFormGroup.controls.userId.value,s.isActive=this.shopFormGroup.controls.isActive.value;let a=[],u={isPermanent:!0,address1:this.shopFormGroup.controls.permanentAddresses.value.address1,address2:this.shopFormGroup.controls.permanentAddresses.value.address2,landmark:this.shopFormGroup.controls.permanentAddresses.value.landmark,city:this.shopFormGroup.controls.permanentAddresses.value.city,pincode:this.shopFormGroup.controls.permanentAddresses.value.pincode,state:this.shopFormGroup.controls.permanentAddresses.value.state,country:this.shopFormGroup.controls.permanentAddresses.value.country};return a.push({isPermanent:!1,address1:this.shopFormGroup.controls.currentAddresses.value.address1,address2:this.shopFormGroup.controls.currentAddresses.value.address2,landmark:this.shopFormGroup.controls.currentAddresses.value.landmark,city:this.shopFormGroup.controls.currentAddresses.value.city,pincode:this.shopFormGroup.controls.currentAddresses.value.pincode,state:this.shopFormGroup.controls.currentAddresses.value.state,country:this.shopFormGroup.controls.currentAddresses.value.country}),a.push(u),s.addresses=a,s}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(d.gz),e.Y36(i.qu),e.Y36(m.d),e.Y36(b.K),e.Y36(A.ez),e.Y36(A.YP),e.Y36(v.Ye))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-shop-detail"]],decls:105,vars:8,consts:[[1,"container"],[3,"formGroup"],[1,"productDetails"],[1,"row"],[1,"p-field"],["for","shopName"],["formControlName","shopName","type","text","pInputText","",1,"p-inputtext-sm"],["for","phone"],["formControlName","phone","type","text","pInputText","",1,"p-inputtext-sm"],["for","userId"],["formControlName","userId","appendTo","body",1,"p-dropdown-sm",3,"options"],["for","isActive"],["inputId","isActive","formControlName","isActive",3,"binary"],[1,"customerAddress"],["formGroupName","currentAddresses",1,"row"],["for","address1"],["formControlName","address1","type","text","pInputText","",1,"p-inputtext-sm"],["for","address2"],["formControlName","address2","type","text","pInputText","",1,"p-inputtext-sm"],["for","landmark"],["formControlName","landmark","type","text","pInputText","",1,"p-inputtext-sm"],["for","city"],["formControlName","city","type","text","pInputText","",1,"p-inputtext-sm"],["for","pincode"],["formControlName","pincode","type","number","pInputText","",1,"p-inputtext-sm"],["for","state"],["formControlName","state","type","text","pInputText","",1,"p-inputtext-sm"],["for","country"],["formControlName","country","type","text","pInputText","",1,"p-inputtext-sm"],[1,"permanentAddressTitle"],["inputId","isPermanentAddSame",3,"binary","onChange"],[2,"margin-left","8px"],["formGroupName","permanentAddresses",1,"row"],[1,"action-container"],["class","btn","mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],["class","btn","mat-raised-button","","color","warn",3,"disabled","click",4,"ngIf"],["mat-raised-button","","color","primary",1,"btn",3,"disabled","click"],["mat-raised-button","","color","warn",1,"btn",3,"disabled","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Add Shop"),e.qZA(),e.TgZ(3,"p-card")(4,"form",1)(5,"div",2)(6,"h2"),e._uU(7,"Shop Details"),e.qZA(),e.TgZ(8,"div",3)(9,"div",4)(10,"label",5),e._uU(11,"Shop Name"),e.qZA(),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"div",4)(14,"label",7),e._uU(15,"Phone Number"),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",4)(18,"label",9),e._uU(19,"User"),e.qZA(),e._UZ(20,"p-dropdown",10),e.qZA(),e.TgZ(21,"div",4)(22,"label",11),e._uU(23),e.qZA(),e._UZ(24,"p-checkbox",12),e.qZA()()(),e.TgZ(25,"div",13)(26,"h2"),e._uU(27,"Address"),e.qZA(),e.TgZ(28,"h3")(29,"u"),e._uU(30,"Current Address"),e.qZA()(),e.TgZ(31,"div",14)(32,"div",4)(33,"label",15),e._uU(34,"Address 1"),e.qZA(),e._UZ(35,"input",16),e.qZA(),e.TgZ(36,"div",4)(37,"label",17),e._uU(38,"Address 2"),e.qZA(),e._UZ(39,"input",18),e.qZA(),e.TgZ(40,"div",4)(41,"label",19),e._uU(42,"Landmark"),e.qZA(),e._UZ(43,"input",20),e.qZA(),e.TgZ(44,"div",4)(45,"label",21),e._uU(46,"City"),e.qZA(),e._UZ(47,"input",22),e.qZA(),e.TgZ(48,"div",4)(49,"label",23),e._uU(50,"Pincode"),e.qZA(),e._UZ(51,"input",24),e.qZA(),e.TgZ(52,"div",4)(53,"label",25),e._uU(54,"State"),e.qZA(),e._UZ(55,"input",26),e.qZA(),e.TgZ(56,"div",4)(57,"label",27),e._uU(58,"Country"),e.qZA(),e._UZ(59,"input",28),e.qZA()(),e._UZ(60,"br"),e.TgZ(61,"div",29)(62,"h3")(63,"u"),e._uU(64,"Permanent Address"),e.qZA()(),e.TgZ(65,"div")(66,"p-checkbox",30),e.NdJ("onChange",function(p){return s.onPermanentAddChkChange(p)}),e.qZA(),e.TgZ(67,"small",31),e._uU(68," ( "),e.TgZ(69,"b"),e._uU(70,"Is Permanent Address same?"),e.qZA(),e._uU(71," )"),e.qZA()()(),e.TgZ(72,"div",32)(73,"div",4)(74,"label",15),e._uU(75,"Address 1"),e.qZA(),e._UZ(76,"input",16),e.qZA(),e.TgZ(77,"div",4)(78,"label",17),e._uU(79,"Address 2"),e.qZA(),e._UZ(80,"input",18),e.qZA(),e.TgZ(81,"div",4)(82,"label",19),e._uU(83,"Landmark"),e.qZA(),e._UZ(84,"input",20),e.qZA(),e.TgZ(85,"div",4)(86,"label",21),e._uU(87,"City"),e.qZA(),e._UZ(88,"input",22),e.qZA(),e.TgZ(89,"div",4)(90,"label",23),e._uU(91,"Pincode"),e.qZA(),e._UZ(92,"input",24),e.qZA(),e.TgZ(93,"div",4)(94,"label",25),e._uU(95,"State"),e.qZA(),e._UZ(96,"input",26),e.qZA(),e.TgZ(97,"div",4)(98,"label",27),e._uU(99,"Country"),e.qZA(),e._UZ(100,"input",28),e.qZA()()(),e.TgZ(101,"div",33),e.YNc(102,x,3,4,"button",34),e.YNc(103,C,3,4,"button",34),e.YNc(104,G,3,4,"button",35),e.qZA()()()()),2&t&&(e.xp6(4),e.Q6J("formGroup",s.shopFormGroup),e.xp6(16),e.Q6J("options",s.usersOptions),e.xp6(3),e.Oqu(1==s.shopFormGroup.controls.isActive.value?"Active":"Inactive"),e.xp6(1),e.Q6J("binary",!0),e.xp6(42),e.Q6J("binary",!0),e.xp6(36),e.Q6J("ngIf",!s.showUpdateBtn),e.xp6(1),e.Q6J("ngIf",s.showUpdateBtn),e.xp6(1),e.Q6J("ngIf",s.showDeleteBtn))},dependencies:[v.O5,i._Y,i.Fj,i.wV,i.JJ,i.JL,i.sg,i.u,i.x0,g.lW,S.o,U.Z,y.Lt,T.XZ,F.X$]}),o})()}]}];let I=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.Bz.forChild(q),d.Bz]}),o})();var D=r(7664);let N=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[D.m,I]}),o})()}}]);